import{c as t,L as e,h as s}from"./vendor.62a16848.js";var r=Object.defineProperty,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,e,s)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,a=(t,e)=>{for(var s in e||(e={}))i.call(e,s)&&l(t,s,e[s]);if(n)for(var s of n(e))o.call(e,s)&&l(t,s,e[s]);return t};class u{constructor(){this.update=()=>{},this.onCreate=t=>{}}renderDom(){return h(this.render())}}function h(t){return t instanceof c?t:h(t.render())}class c extends u{constructor(t){var e;if(super(),this.props=t,this.attributes={},this.styles={},this._children=[],this._events={},this.toString=()=>function(t){const e=[];if(e.push(`new ${t.constructor.name}({`),t.text&&e.push(`text: "${t.text}"`),t.styles){const s=Object.entries(t.styles).filter((t=>t[1].value)).map((([t,e])=>`"${t}": "${e.value}"`));if(s.length>0){e.push("styles: {");for(const t of s)e.push(`${t},`);e.push("},")}}if(t.attributes){const s=Object.entries(t.attributes).filter((t=>t[1].value)).filter((t=>t[1].value)).map((([t,e])=>`"${t}": "${e.value}"`));if(s.length>0){e.push("attributes: {");for(const t of s)e.push(`${t},`);e.push("},")}}if(t.children&&t.children.length>0){e.push("children: {");for(const s of t.children){const t=s.toString();e.push(`${t},`)}e.push("},")}return e.push("})"),e.join("")}(this),this._node=t.node,t.text&&(this.text=t.text),this.children=[...null!=(e=null==t?void 0:t.children)?e:[]],t.attributes)for(const[s,r]of Object.entries(t.attributes))this.addAttr(s,r);if(t.events)for(const[s,r]of Object.entries(t.events))this.addEventListener(s,r)}addAttr(t,e){if(e)if("string"==typeof e)this.attributes[t]=new f(this,t,e);else if("boolean"==typeof e)this.attributes[t]=new f(this,t,e);else if("number"==typeof e)this.attributes[t]=new f(this,t,e);else if("style"===t)for(const[s,r]of Object.entries(e))this.addStyle(s,r)}setAttr(t,e){this.attributes[t]||this.addAttr(t,e),this.attributes[t].value=e}addStyle(t,e){e&&("string"==typeof e?this.styles[t]=new m(this,t,e):e&&(this.styles[t]=e))}setStyle(t,e){this.styles[t]||this.addStyle(t,e),this.styles[t].value=e}render(){return this}get node(){return d(this)}get children(){return this._children}set children(t){this._children=t,this.update()}addChild(t,e){const s=this.children;e?s.splice(e,0,t):s.push(t),this.children=s}removeChild(t){const e=this.children;e.splice(t,1),this.children=e}get text(){return this._text}set text(t){this._text=t,t&&(this._node.innerText=t)}addEventListener(t,e,s){e&&(this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,options:s}))}}function d(t){const e=document.createElement(t._node.tagName);t.text&&(e.textContent=t.text);for(const s of t.children)if(s instanceof u){let t=d(s.renderDom());s.update=()=>{const r=d(s.renderDom());null==e||e.replaceChild(r,t),t=r},e.appendChild(t)}else e.append(s);if(t.styles)for(const[s,r]of Object.entries(t.styles))e.style.setProperty(s,r.value);if(t.attributes){t.attributes.className&&(e.className="string"==typeof t.attributes.className?t.attributes.className:"");for(const[s,r]of Object.entries(t.attributes).filter((t=>t[1].value))){if("className"==s)continue;const t=r.value;t&&("string"==typeof t?e.setAttribute(s,t):"number"==typeof t?e.setAttribute(s,`${t}`):"boolean"==typeof t&&t&&e.setAttribute(s,s))}}for(const[s,r]of Object.entries(t._events))for(const t of r)e.addEventListener(s,t.callback,t.options);return t.props.onCreate&&t.props.onCreate(e),e}function p(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()}class f{constructor(t,e,s){this._root=t,this._key=p(e),this._value=null!=s?s:null,this.update()}get value(){return this._value}set value(t){this._value=t,this.update()}update(){if(null!==this.value)return"string"==typeof this.value?(this.node.setAttribute(this._key,this.value),void this._root.update()):"boolean"==typeof this.value&&this.value||"number"==typeof this.value&&this.value?(this.node.setAttribute(this._key,this._key),void this._root.update()):void 0;this.clear()}clear(){this.node.removeAttribute(this._key),this._root.update()}get node(){return this._root.renderDom().node}}class v extends c{constructor(t={}){super(a({node:document.createElement("div")},t))}}class y extends v{constructor(t={styles:{display:"unset"}}){super(t)}}class b extends y{constructor(t={styles:{display:"flex"}}){super(t)}}class x extends b{constructor(t={styles:{flexDirection:"row",display:"flex"}}){super(t)}}class m{constructor(t,e,s){this._root=t,this._key=p(e),this._value=null!=s?s:null,this.update()}get value(){return this._value}set value(t){this._value=t,this.update()}update(){if(null!==this.value)return"string"==typeof this.value?(this.node.style.setProperty(this._key,this.value),void this._root.update()):void 0;this.clear()}clear(){this.node.style.setProperty(this._key,null),this._root.update()}get node(){return this._root.renderDom().node}}class _ extends c{constructor(t={}){super(a({node:document.createElement("button")},t))}}class g extends c{constructor(t={}){super(a({node:document.createElement("canvas")},t))}}class w extends c{constructor(t={}){super(a({node:document.createElement("h1")},t))}}new DOMParser;class O extends u{constructor(){super(...arguments),this.render=()=>new v({children:[new w({text:"Counter Example"}),new j,new C]})}}class j extends u{constructor(){super(...arguments),this.value=0}render(){return new v({attributes:{style:{margin:"5px"}},children:[`${this.value}`,new x({children:[new _({text:"-",attributes:{style:{width:"50px"}},events:{click:()=>{this.value-=1,this.update()}}}),new _({text:"+",attributes:{style:{width:"50px",marginLeft:"5px"}},events:{click:()=>{this.value+=1,this.update()}}})]})]})}}class C extends u{render(){return new g({attributes:{style:{width:"200px",height:"200px"}},onCreate:t=>{const e=t.getContext("2d");var s=e.createRadialGradient(75,50,5,90,60,100);s.addColorStop(0,"red"),s.addColorStop(1,"white"),e.fillStyle=s,e.fillRect(10,10,150,80)}})}}var k=Object.defineProperty,$=Object.getOwnPropertyDescriptor;let A=class extends e{constructor(){super(...arguments),this.app=new O}render(){const t=this.app.render().node;return s`${t}`}};A=((t,e,s,r)=>{for(var n,i=r>1?void 0:r?$(e,s):e,o=t.length-1;o>=0;o--)(n=t[o])&&(i=(r?n(e,s,i):n(i))||i);return r&&i&&k(e,s,i),i})([t("my-element")],A);
